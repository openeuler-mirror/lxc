From 662d5aab3686ddf29294a7f6d67e4e092cac51e9 Mon Sep 17 00:00:00 2001
From: tanyifeng <tanyifeng1@huawei.com>
Date: Fri, 15 Mar 2019 10:11:10 +0800
Subject: [PATCH 066/131] lxc: Pids limit does not report an error after
 executing the limit in the background

Signed-off-by: wujing <wujing50@huawei.com>
Signed-off-by: LiFeng <lifeng68@huawei.com>
---
 src/lxc/tools/lxc_attach.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/lxc/tools/lxc_attach.c b/src/lxc/tools/lxc_attach.c
index 88569344..acdf8a01 100644
--- a/src/lxc/tools/lxc_attach.c
+++ b/src/lxc/tools/lxc_attach.c
@@ -378,6 +378,8 @@ static int do_attach_background(struct lxc_container *c, lxc_attach_command_t *c
 	if (ret < 0) {
 		if (c->lxc_conf->errmsg)
 			lxc_write_error_message(msgpipe[1], "%s", c->lxc_conf->errmsg);
+		else
+			lxc_write_error_message(msgpipe[1], "Failed to attach container");
 		close(msgpipe[1]);
 		msgpipe[1] = -1;
 		ret = -1;
-- 
2.23.0

